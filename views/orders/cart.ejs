<%- include('./partials/header') %>

<h1>Cart</h1>
<% if (products.length > 0) { %>
  <ul class="cart__item-list">
    <!-- p refers to object passed to cartProducts array in shop controller getCart action -->
    <% products.forEach(p => { %>
      <li class="cart__item">
        <h1><%= p.productId.title %></h1>
        <div class="qty">
          <h2>Qty: <%= p.quantity %></h2>
        </div>
        <form action="/cart-delete-item" method="POST">
          <input type="hidden" value="<%= p.productId._id %>" name="productId">
          <button class="btn-danger" type="submit">Delete</button>
        </form>
      </li>
    <% }) %>
  </ul>
  <div class="order-btn-container">
    <!-- <form action="/create-order" method="POST">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <button class="btn" type="submit">Checkout</button>
    </form> -->
    <a class="btn" href="/checkout">Checkout</a>
  </div>
<% } else { %>
  <h1>No products in cart</h1>
<% } %>


    <!-- <h2 id='userName'> <%= user.name %> </h2>
  </div>
  <ul id='cartContent'>
    <% user.cart.forEach(function(item) { %>
    <li>
      <%= item.quantity %>
      <%- item.item %>
      <%= item.price %>
      <form action='/cart/delete/<%= item._id %>?_method=DELETE' method='POST'>
        <input type='submit' value='Delete'>
      </form>
      <form action="/cart/edit/<%= item._id %>?_method=PUT" method="POST" autocomplete="off">
        <input name='quantity' type='text'>
        <input type="submit" value="Edit Quantity">
      </form>
      <% }); %>
    </li>
  </ul> -->


<%- include('./partials/footer') %>